import{b as T,aU as N,r as C,af as F,T as Q,M as Y,o as B,e as _,B as P,q as S,f as u,k as h,c as o,w as i,v as L,F as U,l as V,i as n,t as f,j as a,Y as M,bL as j,Z as E,C as A,bM as Z,bN as H,bO as z,x as R,y as q,z as O,bP as J,bQ as K,bR as W,a5 as X,aD as ee,bS as se,bT as ne,h as oe,bU as te,bE as G,bF as ae}from"./index-8b922204.js";const ce=l=>(R("data-v-0e3d394f"),l=l(),q(),l),ie={style:{"min-height":"300px"}},le=ce(()=>n("img",{src:O,alt:""},null,-1)),re=["onClick"],de=["onClick"],_e={class:"username"},pe={class:"time"},ue={class:"remark text-ellipsis"},me={class:"tools"},ve={__name:"FriendApply",setup(l){const p=N(),r=C([]),k=C(!0),$=F("$user"),m=Q(()=>p.isContactApply),v=(s=!1)=>{H().then(t=>{t.code==200&&(r.value=t.data.items||[],s&&(p.isContactApply=!1))}).finally(()=>{k.value=!1})},x=s=>{$(s.user_id)},I=z(s=>{let t=window.$message.loading("请稍等，正在处理");J({apply_id:s.id,remark:s.nickname}).then(({code:c,message:y})=>{t.destroy(),c==200?(v(),window.$message.success("已同意")):window.$message.info(y)})},1e3),d=z(s=>{let t=window.$message.loading("请稍等，正在处理");K({apply_id:s.id,remark:"拒绝"}).then(({code:c,message:y})=>{t.destroy(),c==200?(v(),window.$message.success("已拒绝")):window.$message.info(y)})},1e3);return Y(m,()=>{v(!1)}),B(()=>{v(!0)}),(s,t)=>{const c=_("n-empty"),y=_("im-avatar"),w=_("n-icon"),b=_("n-button"),D=P("loading");return S((u(),h("section",ie,[S(o(c,{size:"200",description:"暂无相关数据",style:{"margin-top":"10%"}},{icon:i(()=>[le]),_:1},512),[[L,r.value.length==0]]),(u(!0),h(U,null,V(r.value,e=>(u(),h("div",{class:"item",key:e.id},[n("div",{class:"avatar",onClick:g=>x(e)},[o(y,{size:40,src:e.avatar,username:e.nickname},null,8,["src","username"])],8,re),n("div",{class:"content pointer o-hidden",onClick:g=>x(e)},[n("div",_e,[n("span",null,f(e.nickname),1),n("span",pe,f(a(M)(e.created_at,"{m}/{d} {h}:{i}")),1)]),n("div",ue,"备注: "+f(e.remark),1)],8,de),n("div",me,[o(b,{onClick:g=>a(I)(e),strong:"",secondary:"",circle:"",type:"primary",size:"small"},{icon:i(()=>[o(w,{component:a(j)},null,8,["component"])]),_:2},1032,["onClick"]),o(a(Z),{onPositiveClick:g=>a(d)(e)},{trigger:i(()=>[o(b,{strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:i(()=>[o(w,{component:a(E)},null,8,["component"])]),_:1})]),default:i(()=>[A(" 确认要拒绝申请吗？ ")]),_:2},1032,["onPositiveClick"])])]))),128))])),[[D,k.value]])}}},ye=T(ve,[["__scopeId","data-v-0e3d394f"]]);const ge=l=>(R("data-v-12f2262a"),l=l(),q(),l),fe={style:{"min-height":"300px"}},he=ge(()=>n("img",{src:O,alt:""},null,-1)),ke=["onClick"],$e=["onClick"],we={class:"username"},be={class:"time"},Ce={class:"remark text-ellipsis"},Ae={class:"tools"},xe={__name:"GroupApply",setup(l){const p=N(),r=C([]),k=C(!0),$=F("$user"),m=(d=!1)=>{W().then(s=>{s.code==200&&(r.value=s.data.items||[])}).finally(()=>{k.value=!1})},v=d=>{$(d.user_id)},x=z(d=>{let s=window.$message.loading("请稍等，正在处理");ne({apply_id:d.id}).then(t=>{s.destroy(),t.code==200?window.$message.success("已同意"):window.$message.info(t.message),m()})},1e3),I=d=>{let s="",t=window.$dialog.create({title:"拒绝入群申请",content:()=>X(ee,{defaultValue:"",placeholder:"请填写拒绝原因",style:{marginTop:"20px"},onInput:c=>s=c,autofocus:!0}),negativeText:"取消",positiveText:"提交",onPositiveClick:()=>(s.length&&(t.loading=!0,se({apply_id:d.id,remark:s}).then(c=>{t.destroy(),c.code==200?window.$message.success("已拒绝"):window.$message.info(c.message),m()})),!1)})};return B(()=>{m(!0),p.isGroupApply=!1}),(d,s)=>{const t=_("n-empty"),c=_("im-avatar"),y=_("n-tag"),w=_("n-icon"),b=_("n-button"),D=P("loading");return S((u(),h("section",fe,[S(o(t,{style:{"margin-top":"10%"},size:"200",description:"暂无相关数据"},{icon:i(()=>[he]),_:1},512),[[L,r.value.length==0]]),(u(!0),h(U,null,V(r.value,e=>(u(),h("div",{class:"item",key:e.id},[n("div",{class:"avatar",onClick:g=>v(e)},[o(c,{size:40,src:e.avatar,username:e.nickname},null,8,["src","username"])],8,ke),n("div",{class:"content pointer o-hidden",onClick:g=>v(e)},[n("div",we,[n("span",null,[o(y,{bordered:!1,size:"small",type:"primary"},{default:i(()=>[A(f(e.group_name),1)]),_:2},1024),A(" "+f(e.nickname),1)]),n("span",be,f(a(M)(e.created_at,"{m}/{d} {h}:{i}")),1)]),n("div",Ce,"备注: "+f(e.remark),1)],8,$e),n("div",Ae,[o(b,{onClick:g=>a(x)(e),strong:"",secondary:"",circle:"",size:"small",type:"primary"},{icon:i(()=>[o(w,{component:a(j)},null,8,["component"])]),_:2},1032,["onClick"]),o(b,{onClick:g=>I(e),strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:i(()=>[o(w,{component:a(E)},null,8,["component"])]),_:2},1032,["onClick"])])]))),128))])),[[D,k.value]])}}},Se=T(xe,[["__scopeId","data-v-12f2262a"]]);const Ie={class:"el-container is-vertical height100"},De={class:"el-header header bdr-b"},ze={class:"el-main me-scrollbar me-scrollbar-thumb"},Te={__name:"apply",setup(l){const p=C("friend"),r={friend:ye,group:Se};return(k,$)=>(u(),h("section",Ie,[n("header",De,[o(a(ae),{value:p.value,"onUpdate:value":$[0]||($[0]=m=>p.value=m)},{default:i(()=>[o(a(G),{name:"friend"},{default:i(()=>[A(" 好友申请 ")]),_:1}),o(a(G),{name:"group"},{default:i(()=>[A(" 入群申请 ")]),_:1})]),_:1},8,["value"])]),n("main",ze,[(u(),oe(te(r[p.value])))])]))}},Ne=T(Te,[["__scopeId","data-v-d9b50dfe"]]);export{Ne as default};
