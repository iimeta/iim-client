import{a4 as F,aU as P,bV as z,r as _,d as M,T,o as O,e as v,f as r,k as m,i,c as t,w as n,j as s,bE as h,C as g,t as k,bF as Z,S as W,P as X,aZ as Y,F as y,l as q,h as G,bW as A,E as H,bX as J,bt as N,bY as K,bZ as Q,x as R,y as ee,z as ae,b as oe}from"./index-9dbb5049.js";import{G as te}from"./GroupCard-ca7d6cee.js";const ne=d=>(R("data-v-4b06ab2d"),d=d(),ee(),d),se={id:"drawer-target",class:"el-container is-vertical height100"},le={class:"el-header from-header bdr-b"},re={key:0,class:"el-main flex-center"},ue=ne(()=>i("img",{src:ae,alt:""},null,-1)),ie={key:1,class:"el-main me-scrollbar me-scrollbar-thumb pd-10"},de={class:"cards"},ce=F({__name:"groups",setup(d){const B=P(),L=z(),c=_(!1),f=_(""),u=_([]),l=M({isShow:!1,id:0}),p=_("all"),b=B.uid,w=T(()=>u.value.filter(a=>a.creator_id==b)),S=T(()=>u.value.filter(a=>p.value=="create"&&a.creator_id!=b||p.value=="join"&&a.creator_id==b?!1:a.group_name.toLowerCase().indexOf(f.value.toLowerCase())!=-1)),C=()=>{Q().then(a=>{a.code==200&&(u.value=a.data.items||[])})},$=a=>{l.isShow=!0,l.id=a.id},I=a=>{N(2,a.id)},U=a=>{c.value=!1,C(),L.loadTalkList()};return O(()=>{C()}),(a,o)=>{const x=v("n-icon"),V=v("n-input"),j=v("n-button"),D=v("n-empty");return r(),m(y,null,[i("section",se,[i("header",le,[i("div",null,[t(s(Z),{value:p.value,"onUpdate:value":o[0]||(o[0]=e=>p.value=e)},{default:n(()=>[t(s(h),{name:"all"},{default:n(()=>[g(" 全部群聊("+k(u.value.length)+") ",1)]),_:1}),t(s(h),{name:"create"},{default:n(()=>[g(" 我创建的("+k(w.value.length)+") ",1)]),_:1}),t(s(h),{name:"join"},{default:n(()=>[g(" 我加入的("+k(u.value.length-w.value.length)+") ",1)]),_:1})]),_:1},8,["value"])]),t(s(Y),null,{default:n(()=>[t(V,{value:f.value,"onUpdate:value":o[1]||(o[1]=e=>f.value=e),valueModifiers:{trim:!0},placeholder:"搜索",clearable:"",style:{"max-width":"200px"},round:""},{prefix:n(()=>[t(x,{component:s(W)},null,8,["component"])]),_:1},8,["value"]),t(j,{circle:"",onClick:o[2]||(o[2]=e=>c.value=!0)},{icon:n(()=>[t(x,{component:s(X)},null,8,["component"])]),_:1})]),_:1})]),S.value.length==0?(r(),m("main",re,[t(D,{size:"200",description:"暂无相关数据"},{icon:n(()=>[ue]),_:1})])):(r(),m("main",ie,[i("div",de,[(r(!0),m(y,null,q(S.value,e=>(r(),G(te,{avatar:e.avatar,username:e.group_name,gender:e.gender,motto:e.profile,flag:"查看","is-member":!0,onClick:E=>$(e),onTalk:E=>I(e)},null,8,["avatar","username","gender","motto","onClick","onTalk"]))),256))])]))]),c.value?(r(),G(A,{key:0,onClose:o[3]||(o[3]=e=>c.value=!1),onOnSubmit:U})):H("",!0),t(s(K),{show:l.isShow,"onUpdate:show":o[6]||(o[6]=e=>l.isShow=e),width:400,placement:"right","trap-focus":!1,"block-scroll":!1,to:"#drawer-target","show-mask":"transparent"},{default:n(()=>[t(J,{gid:l.id,onClose:o[4]||(o[4]=e=>l.isShow=!1),onToTalk:o[5]||(o[5]=e=>s(N)(2,l.id))},null,8,["gid"])]),_:1},8,["show"])],64)}}});const ve=oe(ce,[["__scopeId","data-v-4b06ab2d"]]);export{ve as default};
